import{c as E,d as k,a as s,n as F,t as B,w as P,r as x,b as A,e as v,o as q,u as R,f as O,g as T,h as M}from"./index-78349c91.js";import{u as J,F as U,p as H,C as K,B as W}from"./index-c95b5640.js";import{C as Y}from"./index-4f04d5a5.js";import{F as j}from"./index-110adccf.js";import{u as D,g as G,a as Q,H as $,l as z,s as N,I as L}from"./api-3876dcb1.js";import{R as X}from"./index-04279c89.js";const[Z,ee]=E("form"),te={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:F,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:B,showErrorMessage:B,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var oe=k({name:Z,props:te,emits:["submit","failed"],setup(w,{emit:m,slots:g}){const{children:i,linkChildren:y}=J(U),u=e=>e?i.filter(t=>e.includes(t.name)):i,a=e=>new Promise((t,o)=>{const r=[];u(e).reduce((I,C)=>I.then(()=>{if(!r.length)return C.validate().then(V=>{V&&r.push(V)})}),Promise.resolve()).then(()=>{r.length?o(r):t()})}),h=e=>new Promise((t,o)=>{const r=u(e);Promise.all(r.map(n=>n.validate())).then(n=>{n=n.filter(Boolean),n.length?o(n):t()})}),p=e=>{const t=i.find(o=>o.name===e);return t?new Promise((o,r)=>{t.validate().then(n=>{n?r(n):o()})}):Promise.reject()},l=e=>typeof e=="string"?p(e):w.validateFirst?a(e):h(e),S=e=>{typeof e=="string"&&(e=[e]),u(e).forEach(o=>{o.resetValidation()})},f=()=>i.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{i.some(o=>o.name===e?(o.$el.scrollIntoView(t),!0):!1)},_=()=>i.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),d=()=>{const e=_();l().then(()=>m("submit",e)).catch(t=>{m("failed",{values:e,errors:t}),w.scrollToError&&t[0].name&&c(t[0].name)})},b=e=>{H(e),d()};return y({props:w}),D({submit:d,validate:l,getValues:_,scrollToField:c,resetValidation:S,getValidationStatus:f}),()=>{var e;return s("form",{class:ee(),onSubmit:b},[(e=g.default)==null?void 0:e.call(g)])}}});const ne=P(oe),ae={class:"goods"},re={style:{margin:"16px"}},me=k({__name:"index",setup(w){const m=x(""),g=x("");function i(u,a){return Math.floor(Math.random()*(a-u))+u}const y=u=>{let a="PsNxTpgkQ3EIYeW5",h=g.value,p=m.value,l=Q(h);l=l.toUpperCase();let S=a+"."+l,f=i(1e5,1e6),c={account:p,clientRid:f};var _=JSON.stringify(c);let b="/api/gaw/login?sign="+$(_,S);z(b,c).then(e=>{if(e.code==1){let t=e,o=e.accountId,r=e.tokenRid,n=e.servers;localStorage.removeItem("servers"),localStorage.setItem("servers",JSON.stringify(n)),localStorage.removeItem("recordSummers"),t.recordSummers!=null&&t.recordSummers.length>0?localStorage.setItem("recordSummers",JSON.stringify(t.recordSummers)):localStorage.setItem("recordSummers",JSON.stringify([]));let I=a+"."+f+"."+r;sessionStorage.setItem("globalAccountId",o),sessionStorage.setItem("globalSession",I),M.push("main1")}else N("Account does not exist or wrong password")}).catch(e=>{N("Check network")})};return(u,a)=>{const h=L,p=K,l=j,S=Y,f=W,c=ne,_=X;return q(),A("div",ae,[s(_,{gutter:[20,20]},{default:v(()=>[s(p,{span:"24"},{default:v(()=>[s(h,{width:"100%",src:R(G)("../logo/onlinelogo.png")},null,8,["src"])]),_:1}),s(p,{span:"24"},{default:v(()=>[s(c,{onSubmit:y},{default:v(()=>[s(S,{inset:""},{default:v(()=>[s(l,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=d=>m.value=d),required:"","label-align":"top",name:"name",label:"galaxy at war online account",placeholder:"",rules:[{required:!0,message:"Account does not exist"}]},null,8,["modelValue"]),s(l,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=d=>g.value=d),required:"","label-align":"top",type:"password",name:"pasword",label:"pasword",placeholder:"",rules:[{required:!0,message:"wrong password"}]},null,8,["modelValue"])]),_:1}),O("div",re,[s(f,{round:"",block:"",type:"primary","native-type":"submit"},{default:v(()=>[T(" log in ")]),_:1})])]),_:1})]),_:1})]),_:1})])}}});export{me as default};
